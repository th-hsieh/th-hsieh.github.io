{"ast":null,"code":"import _regeneratorRuntime from\"/Users/stasy/Desktop/public-privacy-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/stasy/Desktop/public-privacy-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/stasy/Desktop/public-privacy-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState,useContext}from\"react\";import{useNavigate,useParams}from\"react-router\";import httpClient from\"../http-common.js\";import Footer from\"../components/Footer.js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var OpinionDetails=function OpinionDetails(){var _useParams=useParams(),id=_useParams.id;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),currentOpinion=_useState2[0],setCurrentOpinion=_useState2[1];var navigate=useNavigate();var getOpinion=function getOpinion(id){console.log(\"tracing put 2'\");//ended up in AddOpinion\nreturn httpClient.get(\"/forum/opinions/\".concat(id));};////remove & delete are the same////\nvar removeOpinion=function removeOpinion(id){//remove the apiResponse to the handleDelete\nreturn httpClient.delete(\"/forum/opinions/\".concat(id));};var handleDelete=function handleDelete(){alert(\"Are you sure you want to delete this opinion?\");removeOpinion(id).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(response){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:// alert(`${response.status}`);\nalert(\"Deleted!\");navigate(\"/forum/opinions\");case 2:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}()).catch(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(error){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:alert(\"\".concat(error));alert(\"Only the initial author can modify the content.\");navigate(\"/about\");case 3:case\"end\":return _context2.stop();}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}());};//////////////////////////////\nvar stayOnPage=function stayOnPage(){navigate(\"/forum/opinions/\".concat(id));console.log(\"Is this where put method goes through 6 ?\");};var handleEdit=function handleEdit(){navigate(\"/forum/opinions/edit/\".concat(id));////\nconsole.log(\"Is this where put method goes through 16 ?\");};useEffect(function(){console.log(\"Is this where put method goes through 9 ?\");stayOnPage();},[]);useEffect(function(){////\nconsole.log(\"Is this where put method goes through 10 ?\");//////   \ngetOpinion(id).then(function(response){var message=response.status;var opinionData=response.data;console.log(\" opinionData\");console.log(opinionData);var updatedAt=new Date(opinionData.updatedAt).toUTCString();var createdAt=new Date(opinionData.createdAt).toUTCString();setCurrentOpinion({id:opinionData.id,updatedAt:updatedAt,createdAt:createdAt,collaborator_name:opinionData.collaboratorName,// is this collaborator_name or collaboratorName?\ncategory:opinionData.category,body:opinionData.body,title:opinionData.title});if(message===204){alert(\"Apologies. This opinion is deleted.\");navigate(\"/collaborator/dashboard\");}else if(message===403){alert(\"Sorry, you are not authorized to see the content.\");navigate(\"/about\");}else if(message===500){alert(\"Server-side issues. We'll try to fix it asap.\");navigate(\"/about\");}}).catch(function(error){console.log(\"Is this where put method goes through 11 ?\");// alert(`${error}`);\nreturn;});},[id]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"main-content\",style:{maxHeight:\"600px\",overflow:\"auto\"},children:/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-8\",children:currentOpinion&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"article\",{children:[/*#__PURE__*/_jsx(\"h5\",{className:\"text-capitalize primary-color\",children:currentOpinion.title}),/*#__PURE__*/_jsx(\"div\",{className:\"my-3\",style:{marginBottom:\"0.5em\",fontWeight:\"bolder\"},children:/*#__PURE__*/_jsx(\"span\",{className:\"text-capitalize\",children:currentOpinion.category})}),/*#__PURE__*/_jsx(\"div\",{className:\"my-3\",style:{marginBottom:\"0.5em\"},children:currentOpinion.body}),/*#__PURE__*/_jsx(\"div\",{className:\"my-3\",style:{marginBottom:\"0.5em\"},children:/*#__PURE__*/_jsxs(\"h6\",{style:{fontWeight:\"lighter\",fontSize:\"smaller\"},children:[\"Last Updated: \",new Date(currentOpinion.updatedAt).toLocaleDateString()]})})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleEdit,style:{backgroundColor:\"black\",color:\"white\",borderRadius:\"3px\"},children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleDelete,className:\"ms-3\",style:{backgroundColor:\"black\",color:\"white\",borderRadius:\"3px\"},children:\"Delete\"})]})})})})}),/*#__PURE__*/_jsx(Footer,{})]});};export default OpinionDetails;","map":{"version":3,"names":["useEffect","useState","useContext","useNavigate","useParams","httpClient","Footer","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","OpinionDetails","_useParams","id","_useState","_useState2","_slicedToArray","currentOpinion","setCurrentOpinion","navigate","getOpinion","console","log","get","concat","removeOpinion","delete","handleDelete","alert","then","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","stop","_x","apply","arguments","catch","_ref2","_callee2","error","_callee2$","_context2","_x2","stayOnPage","handleEdit","message","status","opinionData","data","updatedAt","Date","toUTCString","createdAt","collaborator_name","collaboratorName","category","body","title","children","className","style","maxHeight","overflow","marginBottom","fontWeight","fontSize","toLocaleDateString","onClick","backgroundColor","color","borderRadius"],"sources":["/Users/stasy/Desktop/public-privacy-app/src/components/OpinionDetails.js"],"sourcesContent":["import { useEffect, useState, useContext } from \"react\";\nimport { useNavigate, useParams } from \"react-router\";\nimport httpClient from \"../http-common.js\";\nimport Footer from \"../components/Footer.js\";\n\n\n\nconst OpinionDetails = () => {\n\n\n  const { id } = useParams();\n  const [currentOpinion, setCurrentOpinion] = useState(null);\n  const navigate = useNavigate();\n\n\n  const getOpinion = (id) => {\n    console.log(\"tracing put 2'\")//ended up in AddOpinion\n    return httpClient.get(`/forum/opinions/${id}`);\n  };\n\n  ////remove & delete are the same////\n  const removeOpinion = (id) => {   //remove the apiResponse to the handleDelete\n    return httpClient.delete(`/forum/opinions/${id}`);\n  };\n\n  const handleDelete = () => {\n    alert(`Are you sure you want to delete this opinion?`);\n    removeOpinion(id)\n      .then(async (response) => {\n        // alert(`${response.status}`);\n        alert(`Deleted!`);\n        navigate(\"/forum/opinions\");\n      })\n      .catch(async (error) => {\n        alert(`${error}`);\n        alert(`Only the initial author can modify the content.`);\n        navigate(\"/about\");\n      });\n  };\n  //////////////////////////////\n  const stayOnPage = () => {\n    navigate(`/forum/opinions/${id}`);\n    console.log(`Is this where put method goes through 6 ?`);\n  };\n\n  const handleEdit = () => {\n    navigate(`/forum/opinions/edit/${id}`);\n    ////\n    console.log(`Is this where put method goes through 16 ?`);\n  };\n\n\n\n  useEffect(() => {\n    console.log(`Is this where put method goes through 9 ?`);\n    stayOnPage();\n  }, []);\n\n\n\n\n  useEffect(() => {\n    ////\n    console.log(`Is this where put method goes through 10 ?`);\n    //////   \n    getOpinion(id)\n      .then(response => {\n        const message = response.status;\n        const opinionData = response.data;\n        console.log(` opinionData`);\n        console.log(opinionData);\n        const updatedAt = new Date(opinionData.updatedAt).toUTCString();\n        const createdAt = new Date(opinionData.createdAt).toUTCString();\n\n        setCurrentOpinion({\n          id: opinionData.id,\n          updatedAt,\n          createdAt,\n          collaborator_name: opinionData.collaboratorName, // is this collaborator_name or collaboratorName?\n          category: opinionData.category,\n          body: opinionData.body,\n          title: opinionData.title,\n        });\n\n        if (message === 204) {\n          alert(`Apologies. This opinion is deleted.`);\n          navigate(\"/collaborator/dashboard\");\n        }\n        else if (message === 403) {\n          alert(`Sorry, you are not authorized to see the content.`);\n          navigate(\"/about\");\n        } else if (message === 500) {\n          alert(`Server-side issues. We'll try to fix it asap.`);\n          navigate(\"/about\");\n        }\n\n      })\n      .catch((error) => {\n        console.log(`Is this where put method goes through 11 ?`);\n        // alert(`${error}`);\n        return;\n      });\n  }, [id]);\n\n  return (\n    <>\n      <div className=\"container\">\n        <div className=\"main-content\" style={{ maxHeight: \"600px\", overflow: \"auto\" }}>\n          <div className=\"row justify-content-center\">\n            <div className=\"col-md-8\">\n              {currentOpinion && (\n                <div>\n                  <article>\n                    <h5 className=\"text-capitalize primary-color\">{currentOpinion.title}</h5>\n\n                    <div className=\"my-3\" style={{ marginBottom: \"0.5em\", fontWeight: \"bolder\" }}>\n                      <span className=\"text-capitalize\">{currentOpinion.category}</span>\n                    </div>\n                    <div className=\"my-3\" style={{ marginBottom: \"0.5em\" }}>\n                      {currentOpinion.body}\n                    </div>\n                    <div className=\"my-3\" style={{ marginBottom: \"0.5em\" }}>\n                      <h6 style={{ fontWeight: \"lighter\", fontSize: \"smaller\" }}>Last Updated: {new Date(currentOpinion.updatedAt).toLocaleDateString()}</h6>\n\n                    </div>\n\n                  </article>\n\n                  <button\n                    onClick={handleEdit}\n                    style={{ backgroundColor: \"black\", color: \"white\", borderRadius: \"3px\" }}\n                  >\n                    Edit\n                  </button>\n                  <button\n                    onClick={handleDelete}\n                    className=\"ms-3\"\n                    style={{ backgroundColor: \"black\", color: \"white\", borderRadius: \"3px\" }}\n                  >\n                    Delete\n                  </button>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n      <Footer />\n    </>\n  );\n};\n\nexport default OpinionDetails;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}