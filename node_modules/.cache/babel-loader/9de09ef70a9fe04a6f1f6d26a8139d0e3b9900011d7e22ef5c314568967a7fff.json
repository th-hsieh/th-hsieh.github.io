{"ast":null,"code":"import _regeneratorRuntime from\"/Users/stasy/Desktop/public-privacy-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/stasy/Desktop/public-privacy-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/stasy/Desktop/public-privacy-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{useNavigate}from'react-router-dom';import axios from\"axios\";import Footer from\"../components/Footer.js\";// import Alert from './Alert.js';\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Register(){var navigate=useNavigate();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),errorMessage=_useState8[0],setErrorMessage=_useState8[1];////這兩個是給Alert用的\n// const [alertMessage, setAlertMessage] = useState('');\n// const [isAlertVisible, setIsAlertVisible] = useState(false);\nfunction reloadForm(){setUsername('');setEmail('');setPassword('');}function register(_x){return _register.apply(this,arguments);}function _register(){_register=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var apiReponse;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:event.preventDefault();_context.prev=1;_context.next=4;return axios.post(\"https://public-privacy-app.azurewebsites.net/collaborator/register\",{//const apiReponse=await axios.post(\"http://localhost:8080/collaborator/register\", {\nusername:username,email:email,password:password});case 4:apiReponse=_context.sent;if(apiReponse.status!==201){alert(\"Sorry. Either the name or email is already taken. Please use another one.\");// setAlertMessage(\"An error occurred. Please try again.\");\n// setIsAlertVisible(true);\n}////先試試看alert-popup\nalert(\"Now you are a Collaborator, \".concat(username,\"!\"));alert(\"An email has been sent to the provided address. Please confirm the link in 1 hour. \");// setAlertMessage(`Now you are a Collaborator, ${username}!`);\n// setIsAlertVisible(true);\n// setAlertMessage(`An email has been sent to the provided address. Please confirm the link in 1 hour.`);\n// setIsAlertVisible(true);\n//when successful\nsetTimeout(function(){navigate('/collaborator/login');},50);// 0.05 second delay\n_context.next=18;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](1);setErrorMessage(_context.t0.response.data);console.log(\"errorMessage\"+errorMessage);if(_context.t0.response){alert(\"Either the email address or the name is already taken. Please register with another one.\");// setAlertMessage(`Either the email address or the name is already taken. Please register with another one.`);\n// setIsAlertVisible(true);\nif(_context.t0.response.data===\"An email address can only be registered for an account.\"){alert(\"An email address can only be registered for an account.\");// setAlertMessage(`An email address can only be registered for an account.`);\n// setIsAlertVisible(true);\nreloadForm();navigate('/collaborator/register');}else if(_context.t0.response.data===\"Username already exists\"){alert(\"Username already exists\");// setAlertMessage(`Username already exists`);\n// setIsAlertVisible(true);\nreloadForm();navigate('/collaborator/register');}else if(_context.t0.response.data===\"The fields are required to be filled.\"){alert(\"The fields are required to be filled.\");// setAlertMessage(`The fields are required to be filled.`);\n// setIsAlertVisible(true);\nreloadForm();navigate('/collaborator/register');}}else{alert(\"An error occurred. Please try again.\");// setAlertMessage(`An error occurred. Please try again.`);\n// setIsAlertVisible(true);\nreloadForm();navigate('/collaborator/register');}reloadForm();navigate('/collaborator/register');case 18:reloadForm();navigate('/collaborator/register');case 20:case\"end\":return _context.stop();}},_callee,null,[[1,11]]);}));return _register.apply(this,arguments);}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-12 text-center\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"text-center\",children:\"Come Join As Collaborator!\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-6\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:register,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"collaborator_name\",children:\"How should we call you?\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"username\",placeholder:\"Name\",value:username,onChange:function onChange(event){return setUsername(event.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"email\",children:[\"Email         \",/*#__PURE__*/_jsx(\"small\",{className:\"reminder-text\",children:\"(Please provide a valid email address for activating the account)\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",id:\"email\",placeholder:\"Enter Email\",value:email,onChange:function onChange(event){return setEmail(event.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",id:\"password\",placeholder:\"Enter Password\",value:password,onChange:function onChange(event){return setPassword(event.target.value);}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:{backgroundColor:\"black\",color:\"white\",borderRadius:\"5px\"},children:\"Submit\"})})]})})})]}),/*#__PURE__*/_jsx(Footer,{})]});}export default Register;","map":{"version":3,"names":["React","useState","useNavigate","axios","Footer","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Register","navigate","_useState","_useState2","_slicedToArray","username","setUsername","_useState3","_useState4","email","setEmail","_useState5","_useState6","password","setPassword","_useState7","_useState8","errorMessage","setErrorMessage","reloadForm","register","_x","_register","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","event","apiReponse","wrap","_callee$","_context","prev","next","preventDefault","post","sent","status","alert","concat","setTimeout","t0","response","data","console","log","stop","children","className","onSubmit","htmlFor","type","id","placeholder","value","onChange","target","style","backgroundColor","color","borderRadius"],"sources":["/Users/stasy/Desktop/public-privacy-app/src/components/Register.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from \"axios\";\nimport Footer from \"../components/Footer.js\";\n// import Alert from './Alert.js';\n\n\n\nfunction Register() {\n\n  const navigate = useNavigate();\n  const [username, setUsername] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [errorMessage, setErrorMessage] = useState('');\n  ////這兩個是給Alert用的\n  // const [alertMessage, setAlertMessage] = useState('');\n  // const [isAlertVisible, setIsAlertVisible] = useState(false);\n\n\n  function reloadForm() {\n    setUsername('');\n    setEmail('');\n    setPassword('');\n  }\n\n  async function register(event) {\n    event.preventDefault();\n    try {  //https://public-privacy-app.azurewebsites.net/\n      const apiReponse=await axios.post(\"https://public-privacy-app.azurewebsites.net/collaborator/register\",{\n      //const apiReponse=await axios.post(\"http://localhost:8080/collaborator/register\", {\n        username: username,\n        email: email,\n        password: password\n      });\n      if (apiReponse.status!==201){\n        alert(`Sorry. Either the name or email is already taken. Please use another one.`);\n        // setAlertMessage(\"An error occurred. Please try again.\");\n        // setIsAlertVisible(true);\n      }\n\n      ////先試試看alert-popup\n       alert(`Now you are a Collaborator, ${username}!`);\n       alert(`An email has been sent to the provided address. Please confirm the link in 1 hour. `);\n      // setAlertMessage(`Now you are a Collaborator, ${username}!`);\n      // setIsAlertVisible(true);\n      // setAlertMessage(`An email has been sent to the provided address. Please confirm the link in 1 hour.`);\n      // setIsAlertVisible(true);\n      \n      //when successful\n      setTimeout(() => {\n        navigate('/collaborator/login');\n      }, 50); // 0.05 second delay\n    } catch (err) {\n      setErrorMessage(err.response.data);\n\n      console.log(`errorMessage`+errorMessage);\n      if (err.response) {\n        alert(`Either the email address or the name is already taken. Please register with another one.`);\n        // setAlertMessage(`Either the email address or the name is already taken. Please register with another one.`);\n        // setIsAlertVisible(true);\n        if (err.response.data === \"An email address can only be registered for an account.\") {\n          alert(\"An email address can only be registered for an account.\");\n          // setAlertMessage(`An email address can only be registered for an account.`);\n          // setIsAlertVisible(true);\n          reloadForm();\n          navigate('/collaborator/register');\n        } else if (err.response.data === \"Username already exists\") {\n          alert(\"Username already exists\");\n          // setAlertMessage(`Username already exists`);\n          // setIsAlertVisible(true);\n          reloadForm();\n          navigate('/collaborator/register');\n        } else if (err.response.data === \"The fields are required to be filled.\") {\n          alert(\"The fields are required to be filled.\");\n          // setAlertMessage(`The fields are required to be filled.`);\n          // setIsAlertVisible(true);\n          reloadForm();\n          navigate('/collaborator/register');\n        }\n      } else {\n        alert(\"An error occurred. Please try again.\");\n        // setAlertMessage(`An error occurred. Please try again.`);\n        // setIsAlertVisible(true);\n        reloadForm();\n        navigate('/collaborator/register');\n      }\n      reloadForm();\n      navigate('/collaborator/register');\n    }\n\n    reloadForm();\n    navigate('/collaborator/register');\n  }\n\n  return (\n  <>\n    <div className=\"container\">\n      <div className=\"row justify-content-center\">\n        <div className=\"col-sm-12 text-center\">\n          <h2 className=\"text-center\">Come Join As Collaborator!</h2>\n        </div>\n      </div>\n\n      <div className=\"row justify-content-center\">\n        <div className=\"col-sm-6\">\n          <form onSubmit={register}>\n            <div className=\"form-group\">\n              <label htmlFor=\"collaborator_name\">How should we call you?</label>\n              <input\n                type=\"text\"\n                className=\"form-control\"\n                id=\"username\"\n                placeholder=\"Name\"\n                value={username}\n                onChange={(event) => setUsername(event.target.value)} />\n            </div>\n\n            <div className=\"form-group\">\n              <label htmlFor=\"email\">Email         <small className=\"reminder-text\">(Please provide a valid email address for activating the account)</small></label>\n              <input\n                type=\"email\"\n                className=\"form-control\"\n                id=\"email\"\n                placeholder=\"Enter Email\"\n                value={email}\n                onChange={(event) => setEmail(event.target.value)} />\n            </div>\n\n            <div className=\"form-group\">\n              <label htmlFor=\"password\">Password</label>\n              <input\n                type=\"password\"\n                className=\"form-control\"\n                id=\"password\"\n                placeholder=\"Enter Password\"\n                value={password}\n                onChange={(event) => setPassword(event.target.value)} />\n            </div>\n\n            <br />\n\n            <div className=\"text-center\">\n              <button\n                type=\"submit\"\n                style={{\n                  backgroundColor: \"black\",\n                  color: \"white\",\n                  borderRadius: \"5px\",\n                }}>\n                Submit\n              </button>\n            </div>\n          </form>\n          {/* {isAlertVisible && (<Alert message={alertMessage} duration={3500} />)} */}\n        </div>\n      </div>\n    </div>\n  <Footer/>\n  </>  \n  )}\n\nexport default Register;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}