{"ast":null,"code":"import _slicedToArray from\"/Users/stasy/Desktop/public-privacy-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState,useContext}from\"react\";import{Link,useNavigate}from\"react-router-dom\";import AuthContext from\"./shared/AuthContext.js\";import httpClient from\"../http-common.js\";import Footer from\"../components/Footer.js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var OpinionsList=function OpinionsList(){var _useContext=useContext(AuthContext),userInfo=_useContext.userInfo,isAuthenticated=_useContext.isAuthenticated;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),opinions=_useState2[0],setOpinions=_useState2[1];var navigate=useNavigate();var getAll=function getAll(){return httpClient.get('/forum/opinions',{withCredentials:true});};useEffect(function(){getAll().then(function(response){var opinionsData=response.data;console.log(\"This is response.data from OpinionsList:\");console.log(response.data);if(response.status===204||response.status===403||response.status===500||response.status===205){alert(\"Oops, there are some data fetching issues. Come back later please.\");navigate(\"/about\");return;}var updatedOpinions=opinionsData.map(function(opinionData){// Convert createdAt and updatedAt to string format\n//const updatedAtString = new Date(opinionData.updatedAt).toUTCString();\nvar updatedAtString=new Date(opinionData.updatedAt).toLocaleDateString();//const createdAtString = new Date(opinionData.createdAt).toUTCString();\nvar createdAtString=new Date(opinionData.createdAt).toLocaleDateString();return{id:opinionData.id,updatedAt:updatedAtString,createdAt:createdAtString,collaboratorName:userInfo===null||userInfo===void 0?void 0:userInfo.username,category:opinionData.category,body:opinionData.body,title:opinionData.title};});setOpinions(updatedOpinions);}).catch(function(error){//alert(`${error}`);\nalert(\"Please log in first to see the content.\");console.log('something went wrong',error);});},[]);var opinionBlocks=Object.entries(opinions.reduce(function(acc,opinion){if(!acc[opinion.category]){acc[opinion.category]=[];}acc[opinion.category].push(opinion);return acc;},{})).map(function(_ref){var _ref2=_slicedToArray(_ref,2),category=_ref2[0],opinions=_ref2[1];return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{style:{fontWeight:\"bold\"},children:category}),opinions.map(function(opinion){return/*#__PURE__*/_jsx(\"div\",{style:{border:\"1px solid black\",padding:\"1em\",margin:\"1em 0\"},children:/*#__PURE__*/_jsxs(Link,{to:\"/forum/opinions/\".concat(opinion.id),className:\"text-decoration-none\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"text-capitalize\",style:{textDecoration:\"underline\"},children:opinion.title}),/*#__PURE__*/_jsx(\"h6\",{style:{fontWeight:\"normal\"},className:\"text-capitalize text-center\",children:opinion.body}),/*#__PURE__*/_jsxs(\"h6\",{style:{fontSize:\"smaller\",fontWeight:\"lighter\"},children:[\"Last Updated: \",opinion.updatedAt]})]})},opinion.id);})]},category);});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"container\",style:{maxHeight:\"600px\",overflow:\"auto\"},children:[/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-6 text-center\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"OPINIONS\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-6 text-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"d-flex flex-column align-items-center\",style:{width:'100%',margin:'0 auto'},children:isAuthenticated?opinionBlocks.length>0?opinionBlocks:/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"h5\",{children:\"No Opinions available.\"})}):/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"h5\",{children:\"Please log in to see the contents.\"})})})})})]}),/*#__PURE__*/_jsx(Footer,{})]});};export default OpinionsList;","map":{"version":3,"names":["React","useEffect","useState","useContext","Link","useNavigate","AuthContext","httpClient","Footer","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","OpinionsList","_useContext","userInfo","isAuthenticated","_useState","_useState2","_slicedToArray","opinions","setOpinions","navigate","getAll","get","withCredentials","then","response","opinionsData","data","console","log","status","alert","updatedOpinions","map","opinionData","updatedAtString","Date","updatedAt","toLocaleDateString","createdAtString","createdAt","id","collaboratorName","username","category","body","title","catch","error","opinionBlocks","Object","entries","reduce","acc","opinion","push","_ref","_ref2","children","style","fontWeight","border","padding","margin","to","concat","className","textDecoration","fontSize","maxHeight","overflow","width","length"],"sources":["/Users/stasy/Desktop/public-privacy-app/src/components/OpinionsList.js"],"sourcesContent":["import React, { useEffect, useState, useContext } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport AuthContext from \"./shared/AuthContext.js\";\nimport httpClient from \"../http-common.js\";\nimport Footer from \"../components/Footer.js\";\n\n\nconst OpinionsList = () => {\n  const { userInfo, isAuthenticated } = useContext(AuthContext);\n  const [opinions, setOpinions] = useState([]);\n  const navigate = useNavigate();\n\n  const getAll = () => {\n    return httpClient.get('/forum/opinions', {\n      withCredentials: true,\n    });\n  };\n\n  useEffect(() => {\n      getAll()\n        .then(response => {\n          const opinionsData = response.data;\n          console.log(\"This is response.data from OpinionsList:\");\n          console.log(response.data);\n\n          if (response.status === 204 || response.status === 403 || response.status === 500 || response.status === 205) {\n            alert(`Oops, there are some data fetching issues. Come back later please.`);\n            navigate(\"/about\");\n            return;\n          }\n\n          const updatedOpinions = opinionsData.map(opinionData => {\n            // Convert createdAt and updatedAt to string format\n            //const updatedAtString = new Date(opinionData.updatedAt).toUTCString();\n            const updatedAtString = new Date(opinionData.updatedAt).toLocaleDateString()\n            //const createdAtString = new Date(opinionData.createdAt).toUTCString();\n            const createdAtString = new Date(opinionData.createdAt).toLocaleDateString()\n\n            return {\n              id: opinionData.id,\n              updatedAt: updatedAtString,\n              createdAt: createdAtString,\n              collaboratorName: userInfo?.username,\n              category: opinionData.category,\n              body: opinionData.body,\n              title: opinionData.title\n            };\n          });\n          setOpinions(updatedOpinions);\n        })\n        .catch(error => {\n          //alert(`${error}`);\n          alert(`Please log in first to see the content.`);\n          console.log('something went wrong', error);\n        });\n    },[]);\n\n  const opinionBlocks = Object.entries(opinions.reduce((acc, opinion) => {\n    if (!acc[opinion.category]) {\n      acc[opinion.category] = [];\n    }\n    acc[opinion.category].push(opinion);\n    return acc;\n  }, {})).map(([category, opinions]) => (\n    <div key={category}>\n      <h4 style={{ fontWeight: \"bold\" }}>{category}</h4>\n      {opinions.map(opinion => (\n        <div key={opinion.id} style={{ border: \"1px solid black\", padding: \"1em\", margin: \"1em 0\" }}>\n          <Link to={`/forum/opinions/${opinion.id}`} className=\"text-decoration-none\">\n            <h5 className=\"text-capitalize\" style={{ textDecoration: \"underline\" }}>{opinion.title}</h5>\n            <h6 style={{fontWeight:\"normal\" }}className=\"text-capitalize text-center\">{opinion.body}</h6>\n            <h6 style={{ fontSize: \"smaller\", fontWeight:\"lighter\" }}>Last Updated: {opinion.updatedAt}</h6>\n          </Link>\n        </div>\n      ))}\n    </div>\n  ));\n\n  return (\n    <>\n    <div className=\"container\" style={{ maxHeight: \"600px\", overflow: \"auto\" }}>\n      <div className=\"row justify-content-center\">\n        <div className=\"col-sm-6 text-center\">\n          <h2>OPINIONS</h2>\n        </div>\n      </div>\n\n      <div className=\"row justify-content-center\">\n        <div className=\"col-sm-6 text-center\">\n          <div className=\"d-flex flex-column align-items-center\" style={{ width: '100%', margin: '0 auto' }}>\n            {isAuthenticated ? (\n              opinionBlocks.length > 0 ? (\n                opinionBlocks\n              ) : (\n                <div className=\"text-center\">\n                  <h5>No Opinions available.</h5>\n                </div>\n              )\n            ) : (\n              <div className=\"text-center\">\n                <h5>Please log in to see the contents.</h5>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n    <Footer/>\n    </>\n  );\n};\n\nexport default OpinionsList;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}