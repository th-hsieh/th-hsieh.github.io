{"ast":null,"code":"import _regeneratorRuntime from\"/Users/stasy/Desktop/public-privacy-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/stasy/Desktop/public-privacy-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import httpClient from\"../http-common.js\";import'../../src/App.css';import React,{useContext}from'react';import AuthContext from\"./shared/AuthContext.js\";import{useNavigate}from\"react-router\";import Footer from\"../components/Footer.js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var DeleteAccount=function DeleteAccount(){var navigate=useNavigate();var _useContext=useContext(AuthContext),userInfo=_useContext.userInfo,LogOut=_useContext.LogOut;var deleteSubmit1=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var username,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:username=userInfo===null||userInfo===void 0?void 0:userInfo.sub;// Retrieve the username from userInfo\nconsole.log(username);_context.prev=2;_context.next=5;return httpClient.delete(\"/collaborator/deleteAccount?username=\".concat(username),{withCredentials:true});case 5:response=_context.sent;console.log(response.status);console.log(response.data);if(response.status===200||response.status===204){setTimeout(function(){alert('The account has been deleted. Maybe see you next time!');LogOut();},1000);navigate('/about');}_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](2);// Handle any errors here\nalert(\"Sorry. The account is not finally vanished. Please try again.\");case 14:case\"end\":return _context.stop();}},_callee,null,[[2,11]]);}));return function deleteSubmit1(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-column align-items-center\",style:{width:'100%',margin:'0 auto'},children:[/*#__PURE__*/_jsx(\"h2\",{style:{margin:'0 0 0.5em 0'},children:\"Delete Account\"}),/*#__PURE__*/_jsx(\"h6\",{style:{margin:'0.5em 0 2em 0'},children:\"Once deleted, all the data will be removed from the database.\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:deleteSubmit1,style:{backgroundColor:'black',color:'white',borderRadius:'5px'},children:\"Delete\"})]})})})}),/*#__PURE__*/_jsx(Footer,{})]});};export default DeleteAccount;","map":{"version":3,"names":["httpClient","React","useContext","AuthContext","useNavigate","Footer","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","DeleteAccount","navigate","_useContext","userInfo","LogOut","deleteSubmit1","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","username","response","wrap","_callee$","_context","prev","next","sub","console","log","delete","concat","withCredentials","sent","status","data","setTimeout","alert","t0","stop","apply","arguments","children","className","style","width","margin","type","onClick","backgroundColor","color","borderRadius"],"sources":["/Users/stasy/Desktop/public-privacy-app/src/components/DeleteAccount.js"],"sourcesContent":["import httpClient from \"../http-common.js\";\nimport '../../src/App.css';\nimport React,{useContext} from 'react';\nimport AuthContext from \"./shared/AuthContext.js\";\nimport { useNavigate } from \"react-router\";\nimport Footer from \"../components/Footer.js\";\n\nconst DeleteAccount = () => {\n\nconst navigate=useNavigate();\n\nconst {userInfo,LogOut} = useContext(AuthContext);\n\nconst deleteSubmit1 = async () => {\n  const username = userInfo?.sub; // Retrieve the username from userInfo\n  console.log(username);\n\n  try {\n    const response = await httpClient.delete(`/collaborator/deleteAccount?username=${username}`, { withCredentials: true });\n    console.log(response.status);\n    console.log(response.data);\n    if (response.status === 200 || response.status === 204) {\n      setTimeout(() => {\n        alert('The account has been deleted. Maybe see you next time!');\n        LogOut();\n      }, 1000);\n      navigate('/about');\n    }\n  } catch (error) {\n    // Handle any errors here\n    alert(`Sorry. The account is not finally vanished. Please try again.`);\n  }\n};\n\n\n\n  return (\n    <>\n    <div className=\"container\">\n      <div className=\"row justify-content-center\">\n        <div className=\"col-sm-6\">\n          <div\n            className=\"d-flex flex-column align-items-center\"\n            style={{ width: '100%', margin: '0 auto' }}\n          >\n            <h2 style={{ margin: '0 0 0.5em 0' }}>Delete Account</h2>\n            <h6 style={{ margin: '0.5em 0 2em 0' }}>\n              Once deleted, all the data will be removed from the database.\n            </h6>\n            <button\n              type=\"submit\"\n              onClick={deleteSubmit1}\n              style={{\n                backgroundColor: 'black',\n                color: 'white',\n                borderRadius: '5px',\n              }}\n            >\n              Delete\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n    <Footer/>\n  </>\n  );\n};\n\nexport default DeleteAccount;\n"],"mappings":"0QAAA,MAAO,CAAAA,UAAU,KAAM,mBAAmB,CAC1C,MAAO,mBAAmB,CAC1B,MAAO,CAAAC,KAAK,EAAEC,UAAU,KAAO,OAAO,CACtC,MAAO,CAAAC,WAAW,KAAM,yBAAyB,CACjD,OAASC,WAAW,KAAQ,cAAc,CAC1C,MAAO,CAAAC,MAAM,KAAM,yBAAyB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAE7C,GAAM,CAAAC,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAA,CAAS,CAE5B,GAAM,CAAAC,QAAQ,CAACT,WAAW,CAAC,CAAC,CAE5B,IAAAU,WAAA,CAA0BZ,UAAU,CAACC,WAAW,CAAC,CAA1CY,QAAQ,CAAAD,WAAA,CAARC,QAAQ,CAACC,MAAM,CAAAF,WAAA,CAANE,MAAM,CAEtB,GAAM,CAAAC,aAAa,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,QAAA,CAAAC,QAAA,QAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SACdN,QAAQ,CAAGR,QAAQ,SAARA,QAAQ,iBAARA,QAAQ,CAAEe,GAAG,CAAE;AAChCC,OAAO,CAACC,GAAG,CAACT,QAAQ,CAAC,CAACI,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAGG,CAAA7B,UAAU,CAACiC,MAAM,yCAAAC,MAAA,CAAyCX,QAAQ,EAAI,CAAEY,eAAe,CAAE,IAAK,CAAC,CAAC,QAAjHX,QAAQ,CAAAG,QAAA,CAAAS,IAAA,CACdL,OAAO,CAACC,GAAG,CAACR,QAAQ,CAACa,MAAM,CAAC,CAC5BN,OAAO,CAACC,GAAG,CAACR,QAAQ,CAACc,IAAI,CAAC,CAC1B,GAAId,QAAQ,CAACa,MAAM,GAAK,GAAG,EAAIb,QAAQ,CAACa,MAAM,GAAK,GAAG,CAAE,CACtDE,UAAU,CAAC,UAAM,CACfC,KAAK,CAAC,wDAAwD,CAAC,CAC/DxB,MAAM,CAAC,CAAC,CACV,CAAC,CAAE,IAAI,CAAC,CACRH,QAAQ,CAAC,QAAQ,CAAC,CACpB,CAACc,QAAA,CAAAE,IAAA,kBAAAF,QAAA,CAAAC,IAAA,IAAAD,QAAA,CAAAc,EAAA,CAAAd,QAAA,aAED;AACAa,KAAK,gEAAgE,CAAC,CAAC,yBAAAb,QAAA,CAAAe,IAAA,MAAApB,OAAA,iBAE1E,kBAnBK,CAAAL,aAAaA,CAAA,SAAAC,IAAA,CAAAyB,KAAA,MAAAC,SAAA,OAmBlB,CAIC,mBACEnC,KAAA,CAAAE,SAAA,EAAAkC,QAAA,eACAtC,IAAA,QAAKuC,SAAS,CAAC,WAAW,CAAAD,QAAA,cACxBtC,IAAA,QAAKuC,SAAS,CAAC,4BAA4B,CAAAD,QAAA,cACzCtC,IAAA,QAAKuC,SAAS,CAAC,UAAU,CAAAD,QAAA,cACvBpC,KAAA,QACEqC,SAAS,CAAC,uCAAuC,CACjDC,KAAK,CAAE,CAAEC,KAAK,CAAE,MAAM,CAAEC,MAAM,CAAE,QAAS,CAAE,CAAAJ,QAAA,eAE3CtC,IAAA,OAAIwC,KAAK,CAAE,CAAEE,MAAM,CAAE,aAAc,CAAE,CAAAJ,QAAA,CAAC,gBAAc,CAAI,CAAC,cACzDtC,IAAA,OAAIwC,KAAK,CAAE,CAAEE,MAAM,CAAE,eAAgB,CAAE,CAAAJ,QAAA,CAAC,+DAExC,CAAI,CAAC,cACLtC,IAAA,WACE2C,IAAI,CAAC,QAAQ,CACbC,OAAO,CAAElC,aAAc,CACvB8B,KAAK,CAAE,CACLK,eAAe,CAAE,OAAO,CACxBC,KAAK,CAAE,OAAO,CACdC,YAAY,CAAE,KAChB,CAAE,CAAAT,QAAA,CACH,QAED,CAAQ,CAAC,EACN,CAAC,CACH,CAAC,CACH,CAAC,CACH,CAAC,cACNtC,IAAA,CAACF,MAAM,GAAC,CAAC,EACT,CAAC,CAEL,CAAC,CAED,cAAe,CAAAO,aAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}